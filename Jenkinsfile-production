node {
    def image
    def imageName = "tvphuong/dashboard-webapp-production"

    stage("Checkout SCM") {
        checkout scm
    }

    stage("Checkout Code") {
        git "https://github.com/TrinhVPhuong/dash-board.git"
    }

    stage("Build Image") {
        image = docker.build("${imageName}")
    }

    stage("Push image") {
        /* Push image using withRegistry. */
        docker.withRegistry("https://index.docker.io/v1/", "bongao-hub") {
            app.push("${env.BUILD_NUMBER}")
            app.push("latest")
        }
    }
}
